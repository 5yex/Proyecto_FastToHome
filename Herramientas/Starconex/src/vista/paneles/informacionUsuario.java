/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package vista.paneles;

import controlador.conexion;
import javax.swing.JOptionPane;
import modelo.usuario;

/**
 *
 * @author JM
 */
public class informacionUsuario extends javax.swing.JPanel {

    private usuario usuarioActual;
    private conexion conex;

    /**
     * Creates new form informacionUsuario
     */
    public informacionUsuario(usuario user, conexion conex) {
        initComponents();
        this.conex = conex;
        this.usuarioActual = user;
        mostrarContenido();
        password.setVisible(false);
        passwordtxt.setVisible(false);

    }

    public informacionUsuario(conexion conex) {
        initComponents();
        this.conex = conex;
        dni.setEditable(true);
        title.setText("NUEVO USUARIO");
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        title = new javax.swing.JLabel();
        id1 = new javax.swing.JLabel();
        dni1 = new javax.swing.JLabel();
        nombre1 = new javax.swing.JLabel();
        apellidos1 = new javax.swing.JLabel();
        passwordtxt = new javax.swing.JLabel();
        telefono1 = new javax.swing.JLabel();
        id = new javax.swing.JTextField();
        telefono = new javax.swing.JTextField();
        tipo = new javax.swing.JTextField();
        dni = new javax.swing.JTextField();
        nombre = new javax.swing.JTextField();
        apellidos = new javax.swing.JTextField();
        jButton1 = new javax.swing.JButton();
        tipo2 = new javax.swing.JLabel();
        password = new javax.swing.JPasswordField();

        setBackground(new java.awt.Color(239, 253, 245));
        setForeground(new java.awt.Color(255, 255, 255));
        setMinimumSize(new java.awt.Dimension(626, 177));
        setOpaque(false);
        setPreferredSize(new java.awt.Dimension(626, 177));
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        title.setBackground(new java.awt.Color(239, 246, 253));
        title.setFont(new java.awt.Font("Roboto Black", 3, 14)); // NOI18N
        title.setText("INFORMACIÓN PERSONAL:");
        add(title, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 30, 420, -1));

        id1.setFont(new java.awt.Font("Roboto", 0, 18)); // NOI18N
        id1.setText("ID:");
        add(id1, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 60, 62, -1));

        dni1.setFont(new java.awt.Font("Roboto", 0, 18)); // NOI18N
        dni1.setText("DNI:");
        add(dni1, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 90, 62, -1));

        nombre1.setFont(new java.awt.Font("Roboto", 0, 18)); // NOI18N
        nombre1.setText("Nombre:");
        add(nombre1, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 60, 97, -1));

        apellidos1.setFont(new java.awt.Font("Roboto", 0, 18)); // NOI18N
        apellidos1.setText("Apellidos:");
        add(apellidos1, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 90, 97, -1));

        passwordtxt.setFont(new java.awt.Font("Roboto", 0, 18)); // NOI18N
        passwordtxt.setText("Pass:");
        add(passwordtxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 150, 50, -1));

        telefono1.setFont(new java.awt.Font("Roboto", 0, 18)); // NOI18N
        telefono1.setText("Teléfono:");
        add(telefono1, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 120, 97, -1));

        id.setEditable(false);
        id.setFont(new java.awt.Font("Arial", 0, 17)); // NOI18N
        id.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                idActionPerformed(evt);
            }
        });
        add(id, new org.netbeans.lib.awtextra.AbsoluteConstraints(80, 60, 180, 24));

        telefono.setFont(new java.awt.Font("Arial", 0, 17)); // NOI18N
        telefono.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                telefonoActionPerformed(evt);
            }
        });
        add(telefono, new org.netbeans.lib.awtextra.AbsoluteConstraints(390, 120, 210, 24));

        tipo.setEditable(false);
        tipo.setFont(new java.awt.Font("Arial", 0, 17)); // NOI18N
        tipo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tipoActionPerformed(evt);
            }
        });
        add(tipo, new org.netbeans.lib.awtextra.AbsoluteConstraints(80, 120, 180, 24));

        dni.setEditable(false);
        dni.setFont(new java.awt.Font("Arial", 0, 17)); // NOI18N
        dni.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                dniActionPerformed(evt);
            }
        });
        add(dni, new org.netbeans.lib.awtextra.AbsoluteConstraints(80, 90, 180, 24));

        nombre.setFont(new java.awt.Font("Arial", 0, 17)); // NOI18N
        nombre.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                nombreActionPerformed(evt);
            }
        });
        add(nombre, new org.netbeans.lib.awtextra.AbsoluteConstraints(390, 60, 210, 24));

        apellidos.setFont(new java.awt.Font("Arial", 0, 17)); // NOI18N
        apellidos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                apellidosActionPerformed(evt);
            }
        });
        add(apellidos, new org.netbeans.lib.awtextra.AbsoluteConstraints(390, 90, 210, 24));

        jButton1.setText("GUARDAR CAMBIOS");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        add(jButton1, new org.netbeans.lib.awtextra.AbsoluteConstraints(440, 20, 160, -1));

        tipo2.setFont(new java.awt.Font("Roboto", 0, 18)); // NOI18N
        tipo2.setText("Tipo:");
        add(tipo2, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 120, 62, -1));

        password.setText("jPasswordField1");
        add(password, new org.netbeans.lib.awtextra.AbsoluteConstraints(80, 150, 520, -1));
    }// </editor-fold>//GEN-END:initComponents

    private void idActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_idActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_idActionPerformed

    private void telefonoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_telefonoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_telefonoActionPerformed

    private void tipoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tipoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_tipoActionPerformed

    private void dniActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_dniActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_dniActionPerformed

    private void nombreActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_nombreActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_nombreActionPerformed

    private void apellidosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_apellidosActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_apellidosActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        edicionUsuario();
    }//GEN-LAST:event_jButton1ActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField apellidos;
    private javax.swing.JLabel apellidos1;
    private javax.swing.JTextField dni;
    private javax.swing.JLabel dni1;
    private javax.swing.JTextField id;
    private javax.swing.JLabel id1;
    private javax.swing.JButton jButton1;
    private javax.swing.JTextField nombre;
    private javax.swing.JLabel nombre1;
    private javax.swing.JPasswordField password;
    private javax.swing.JLabel passwordtxt;
    private javax.swing.JTextField telefono;
    private javax.swing.JLabel telefono1;
    private javax.swing.JTextField tipo;
    private javax.swing.JLabel tipo2;
    private javax.swing.JLabel title;
    // End of variables declaration//GEN-END:variables

    private void mostrarContenido() {
        telefono.setText(usuarioActual.getDni());
        nombre.setText(usuarioActual.getNombre());
        apellidos.setText(usuarioActual.getApellidos());
        id.setText(String.valueOf(usuarioActual.getId()));
        dni.setText(usuarioActual.getDni());
        telefono.setText(usuarioActual.getTelefono());
        tipo.setText(usuarioActual.getTipo_usuario().toString());
    }

    private void actualizar() {
        usuarioActual = controlador.usuarioDAO.obtenerUsuarioPricipal(conex, usuarioActual);
    }

    private void edicionUsuario() {
        if (usuarioActual == null) {
            nuevoUsuario();
        } else {
            usuario usuarioEditado = usuarioActual;
            usuarioEditado.setNombre(nombre.getText());
            usuarioEditado.setApellidos(apellidos.getText());
            usuarioEditado.setTelefono(telefono.getText());
            if (controlador.usuarioDAO.editarUsuario(conex, usuarioActual)) {
                JOptionPane.showMessageDialog(null, "Información actualizada Correctamente!");
            }
        }
        actualizar();
        mostrarContenido();
    }

    private void nuevoUsuario() {
        usuario usuarioNuevo = new usuario();
        usuarioNuevo.setNombre(nombre.getText());
        usuarioNuevo.setApellidos(apellidos.getText());
        usuarioNuevo.setTelefono(telefono.getText());
        usuarioNuevo.setDni(dni.getText());
        usuarioNuevo.setClave(password.getPassword().toString());
        if (controlador.usuarioDAO.nuevoUsuario(conex, usuarioNuevo)) {
            JOptionPane.showMessageDialog(null, "Has sido registrado Correctamente!");
        }
        usuarioActual = usuarioNuevo;
    }
}
